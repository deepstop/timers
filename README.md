<link
    href="http://cdn.pydata.org/bokeh/release/bokeh-0.12.0.min.css"
    rel="stylesheet" type="text/css">
<link
    href="http://cdn.pydata.org/bokeh/release/bokeh-widgets-0.12.0.min.css"
    rel="stylesheet" type="text/css">

<script src="http://cdn.pydata.org/bokeh/release/bokeh-0.12.0.min.js"></script>
<script src="http://cdn.pydata.org/bokeh/release/bokeh-widgets-0.12.0.min.js"></script>

# timers
## A collection of countdown timers, written in Python

### clitimer.py - A command line countdown timer

_clitimer.py_ takes a single argument - the start time to count down from - shows a countdown and rings the system bell when finished. Usage below:

```Bash
python clitimer.py 60
# or
python clitimer.py 1:00
```

#### Requirements
As the script uses the `\a` notation to ring the system bell, this script won't work on the windows command line.

### browsertimer.py - Using bokeh to produce a countdown timer

_browsertimer.py_ uses JavaScript callbacks with `bokeh.plotting` to create an HTML timer that counts down from a user-defined time to zero.

```Bash
python browsertimer.py
```

When the timer launches in the browser, you can use the sliders to adjust the limit on the timer, and the buttons to start, stop/pause, and reset the timer.

<script type="text/javascript">
    Bokeh.$(function() {
    var docs_json = {"686e6993-5830-42de-a9db-d55b28c73143":{"roots":{"references":[{"attributes":{"children":[{"id":"e70f0069-c820-420a-a4b0-f49553bcc8b7","type":"Slider"}]},"id":"0726e774-48ac-4447-a452-b35983763c81","type":"WidgetBox"},{"attributes":{"axis_line_color":{"value":null},"formatter":{"id":"7f03b151-3268-4bcb-a892-287a9c211d52","type":"BasicTickFormatter"},"major_label_text_color":{"value":null},"major_tick_line_color":{"value":null},"minor_tick_line_color":{"value":null},"plot":{"id":"ebb07794-85de-4b49-8396-d2ecebe395a2","subtype":"Figure","type":"Plot"},"ticker":{"id":"9d4bb676-6365-42dd-9e79-d1adf0695618","type":"BasicTicker"}},"id":"b49ebea5-a4ab-4740-b6ae-b667a9a52bcc","type":"LinearAxis"},{"attributes":{"callback":null,"end":8,"start":-8},"id":"f4876aa9-4a0a-4240-9314-f6fed2b382d7","type":"Range1d"},{"attributes":{"args":{"mins_slider":{"id":"28abf2aa-9e06-4cab-a480-54129711827a","type":"Slider"},"secs_slider":{"id":"e70f0069-c820-420a-a4b0-f49553bcc8b7","type":"Slider"},"source":{"id":"69deee5c-0cf8-4920-adfb-eb4ac356634c","type":"ColumnDataSource"},"start_button":{"id":"818f6229-4f1c-4332-b705-20381da1fe27","type":"Button"}},"code":"\n    var data = source.get('data');\n    var input_mins = mins_slider.get('value');\n    var input_secs = secs_slider.get('value');\n    time_string = data['time_string'];\n    time_remaining = data['time_remaining'];\n    start_button_id = start_button.get('id');\n    start_button_element = document.querySelector('#modelid_' + start_button_id + '>button');\n    start_time = data['start_time'];\n    start_time[0] = (input_mins * 60) + (input_secs);\n    if (start_button_element.hasAttribute('disabled')) {\n    } else {\n        time_remaining[0] = start_time[0];\n        time_string[0] = ('0' + Math.floor(time_remaining[0] / 60)).slice(-2) + ':' + ('0' + Math.floor(time_remaining[0] % 60)).slice(-2);\n    }\n    source.trigger('change');\n"},"id":"2d3ecbeb-e8b4-440f-890c-e050e6bde653","type":"CustomJS"},{"attributes":{"children":[{"id":"e63c4bae-94d1-4278-9f5e-33af98ad7c7c","type":"Row"},{"id":"287f0ddf-acfc-43f3-b0ab-dfecd666672f","type":"Row"},{"id":"ebb07794-85de-4b49-8396-d2ecebe395a2","subtype":"Figure","type":"Plot"}]},"id":"f1c0c82a-9e0b-46f6-a194-5e86c4b4f9de","type":"Column"},{"attributes":{"grid_line_color":{"value":null},"plot":{"id":"ebb07794-85de-4b49-8396-d2ecebe395a2","subtype":"Figure","type":"Plot"},"ticker":{"id":"9d4bb676-6365-42dd-9e79-d1adf0695618","type":"BasicTicker"}},"id":"182b1703-5892-4456-a85f-2d9763fd2743","type":"Grid"},{"attributes":{"children":[{"id":"818f6229-4f1c-4332-b705-20381da1fe27","type":"Button"}]},"id":"4491e8d5-36e5-4378-9425-442e97ba7652","type":"WidgetBox"},{"attributes":{"callback":{"id":"3e98b880-6b58-4d08-a3aa-d6f5818334d0","type":"CustomJS"},"icon":null,"label":"Start"},"id":"818f6229-4f1c-4332-b705-20381da1fe27","type":"Button"},{"attributes":{"callback":{"id":"2d3ecbeb-e8b4-440f-890c-e050e6bde653","type":"CustomJS"},"end":59,"step":1,"title":"Seconds","value":0},"id":"e70f0069-c820-420a-a4b0-f49553bcc8b7","type":"Slider"},{"attributes":{"active_drag":"auto","active_scroll":"auto","active_tap":"auto"},"id":"7f884df0-bcc2-4e33-b6a5-a888a6df2030","type":"Toolbar"},{"attributes":{"callback":{"id":"2d3ecbeb-e8b4-440f-890c-e050e6bde653","type":"CustomJS"},"end":99,"step":1,"title":"Minutes","value":5},"id":"28abf2aa-9e06-4cab-a480-54129711827a","type":"Slider"},{"attributes":{},"id":"3c0c95c4-e23a-4ec8-8e3c-34bc25b8497f","type":"BasicTickFormatter"},{"attributes":{"args":{"reset_button":{"id":"fe891c25-f2d6-46ba-9373-80a5993c2699","type":"Button"},"source":{"id":"69deee5c-0cf8-4920-adfb-eb4ac356634c","type":"ColumnDataSource"},"start_button":{"id":"818f6229-4f1c-4332-b705-20381da1fe27","type":"Button"},"stop_button":{"id":"0fa4750b-92f3-4786-b89f-cc1571de30b5","type":"Button"}},"code":"\n    function disable_button(button) {\n        button_id = button.get('id');\n        button_element = document.querySelector('#modelid_' + button_id + '>button');\n        button_element.setAttribute('disabled');\n    }\n    function enable_button(button) {\n        button_id = button.get('id');\n        button_element = document.querySelector('#modelid_' + button_id + '>button');\n        button_element.removeAttribute('disabled');\n    }\n    var data = source.get('data');\n    interval_id = data['interval_id'];\n    function countdown() {\n        start_time = data['start_time'];\n        time_remaining = data['time_remaining'];\n        time_string = data['time_string'];\n        text_color = data['text_color'];\n        fill_color = data['fill_color'];\n        if (time_remaining[0] == 0) {\n            if (text_color[0] == '#ffffff') {\n                text_color[0] = '#ff0000';\n            }else {\n                text_color[0] = '#ffffff';\n            }\n        }else{\n            time_remaining[0]--;\n            time_string[0] = ('0' + Math.floor(time_remaining[0] / 60)).slice(-2) + ':' + ('0' + Math.floor(time_remaining[0] % 60)).slice(-2);\n            if (time_remaining[0] <= start_time[0]/10) {\n                fill_color[0] = '#ff0000';\n            }\n        }\n        source.trigger('change');\n    }\n    disable_button(start_button);\n    enable_button(stop_button);\n    enable_button(reset_button);\n    interval_id[0] = setInterval(countdown, 1000);\n    source.trigger('change');\n"},"id":"3e98b880-6b58-4d08-a3aa-d6f5818334d0","type":"CustomJS"},{"attributes":{"data_source":{"id":"69deee5c-0cf8-4920-adfb-eb4ac356634c","type":"ColumnDataSource"},"glyph":{"id":"9f520b1e-5cec-4b4a-a01c-8ee876e4c0a6","type":"Text"},"hover_glyph":null,"name":"timer","nonselection_glyph":{"id":"6175059e-eef6-4bf5-97b9-19a43a6a7807","type":"Text"},"selection_glyph":null},"id":"42d8e341-90db-472c-ab4d-4447c5e7f037","type":"GlyphRenderer"},{"attributes":{"fill_color":{"field":"fill_color"},"height":{"units":"data","value":10},"line_color":{"value":null},"width":{"units":"data","value":16},"x":{"field":"x"},"y":{"field":"y"}},"id":"ea65a777-6169-4ecc-b1d8-69e21df80275","type":"Rect"},{"attributes":{"callback":{"id":"18c774be-10e5-4a6c-baa6-95ce36a1c0b7","type":"CustomJS"},"icon":null,"label":"Reset"},"id":"fe891c25-f2d6-46ba-9373-80a5993c2699","type":"Button"},{"attributes":{},"id":"9d4bb676-6365-42dd-9e79-d1adf0695618","type":"BasicTicker"},{"attributes":{},"id":"4ff78272-957d-4d83-b29d-6053b4afe18b","type":"ToolEvents"},{"attributes":{"children":[{"id":"4491e8d5-36e5-4378-9425-442e97ba7652","type":"WidgetBox"},{"id":"509e0259-35c5-4d20-b0c0-5d448aedf92d","type":"WidgetBox"},{"id":"c22c24b1-312e-494f-beaf-97ca754922d3","type":"WidgetBox"}]},"id":"287f0ddf-acfc-43f3-b0ab-dfecd666672f","type":"Row"},{"attributes":{"children":[{"id":"fe891c25-f2d6-46ba-9373-80a5993c2699","type":"Button"}]},"id":"c22c24b1-312e-494f-beaf-97ca754922d3","type":"WidgetBox"},{"attributes":{"plot":null,"text":null},"id":"c50c535a-dc43-4ec4-bb0e-6139aa5eebab","type":"Title"},{"attributes":{"callback":null,"end":5,"start":-5},"id":"85372945-102d-462a-a049-4fa32b7935be","type":"Range1d"},{"attributes":{"axis_line_color":{"value":null},"formatter":{"id":"3c0c95c4-e23a-4ec8-8e3c-34bc25b8497f","type":"BasicTickFormatter"},"major_label_text_color":{"value":null},"major_tick_line_color":{"value":null},"minor_tick_line_color":{"value":null},"plot":{"id":"ebb07794-85de-4b49-8396-d2ecebe395a2","subtype":"Figure","type":"Plot"},"ticker":{"id":"48487e8b-ec80-480a-80ea-60d06002a9cd","type":"BasicTicker"}},"id":"5298f0ab-9b89-4964-848d-6264b13fae5a","type":"LinearAxis"},{"attributes":{"dimension":1,"grid_line_color":{"value":null},"plot":{"id":"ebb07794-85de-4b49-8396-d2ecebe395a2","subtype":"Figure","type":"Plot"},"ticker":{"id":"48487e8b-ec80-480a-80ea-60d06002a9cd","type":"BasicTicker"}},"id":"ae8fe0f3-b9c5-40c5-a8c5-8a26a192e7bf","type":"Grid"},{"attributes":{"args":{"reset_button":{"id":"fe891c25-f2d6-46ba-9373-80a5993c2699","type":"Button"},"source":{"id":"69deee5c-0cf8-4920-adfb-eb4ac356634c","type":"ColumnDataSource"},"start_button":{"id":"818f6229-4f1c-4332-b705-20381da1fe27","type":"Button"},"stop_button":{"id":"0fa4750b-92f3-4786-b89f-cc1571de30b5","type":"Button"}},"code":"\n    function disable_button(button) {\n        button_id = button.get('id');\n        button_element = document.querySelector('#modelid_' + button_id + '>button');\n        button_element.setAttribute('disabled');\n    }\n    function enable_button(button) {\n        button_id = button.get('id');\n        button_element = document.querySelector('#modelid_' + button_id + '>button');\n        button_element.removeAttribute('disabled');\n    }\n    var data = source.get('data');\n    interval_id = data['interval_id'];\n    start_time = data['start_time'];\n    time_remaining = data['time_remaining'];\n    time_string = data['time_string'];\n    text_color = data['text_color'];\n    fill_color = data['fill_color'];\n    text_color[0] = '#ffffff';\n    fill_color[0] = '78c400';\n    if (interval_id[0] != 0) {\n        clearInterval(interval_id[0]);\n    }\n    time_remaining[0] = start_time[0];\n    time_string[0] = ('0' + Math.floor(time_remaining[0] / 60)).slice(-2) + ':' + ('0' + Math.floor(time_remaining[0] % 60)).slice(-2);\n    enable_button(start_button);\n    disable_button(stop_button);\n    disable_button(reset_button);\n    source.trigger('change');\n"},"id":"18c774be-10e5-4a6c-baa6-95ce36a1c0b7","type":"CustomJS"},{"attributes":{"below":[{"id":"b49ebea5-a4ab-4740-b6ae-b667a9a52bcc","type":"LinearAxis"}],"left":[{"id":"5298f0ab-9b89-4964-848d-6264b13fae5a","type":"LinearAxis"}],"plot_height":400,"renderers":[{"id":"b49ebea5-a4ab-4740-b6ae-b667a9a52bcc","type":"LinearAxis"},{"id":"182b1703-5892-4456-a85f-2d9763fd2743","type":"Grid"},{"id":"5298f0ab-9b89-4964-848d-6264b13fae5a","type":"LinearAxis"},{"id":"ae8fe0f3-b9c5-40c5-a8c5-8a26a192e7bf","type":"Grid"},{"id":"574743ab-5cde-4a79-9d92-39aaae51d2c5","type":"GlyphRenderer"},{"id":"42d8e341-90db-472c-ab4d-4447c5e7f037","type":"GlyphRenderer"}],"title":{"id":"c50c535a-dc43-4ec4-bb0e-6139aa5eebab","type":"Title"},"tool_events":{"id":"4ff78272-957d-4d83-b29d-6053b4afe18b","type":"ToolEvents"},"toolbar":{"id":"7f884df0-bcc2-4e33-b6a5-a888a6df2030","type":"Toolbar"},"x_range":{"id":"f4876aa9-4a0a-4240-9314-f6fed2b382d7","type":"Range1d"},"y_range":{"id":"85372945-102d-462a-a049-4fa32b7935be","type":"Range1d"}},"id":"ebb07794-85de-4b49-8396-d2ecebe395a2","subtype":"Figure","type":"Plot"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"height":{"units":"data","value":10},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"width":{"units":"data","value":16},"x":{"field":"x"},"y":{"field":"y"}},"id":"36e19e3e-8666-4862-86af-fc84b915166c","type":"Rect"},{"attributes":{},"id":"48487e8b-ec80-480a-80ea-60d06002a9cd","type":"BasicTicker"},{"attributes":{"children":[{"id":"adf9ecea-bd46-4ce7-bcca-21fe549f5ba3","type":"WidgetBox"},{"id":"0726e774-48ac-4447-a452-b35983763c81","type":"WidgetBox"}]},"id":"e63c4bae-94d1-4278-9f5e-33af98ad7c7c","type":"Row"},{"attributes":{},"id":"7f03b151-3268-4bcb-a892-287a9c211d52","type":"BasicTickFormatter"},{"attributes":{"data_source":{"id":"69deee5c-0cf8-4920-adfb-eb4ac356634c","type":"ColumnDataSource"},"glyph":{"id":"ea65a777-6169-4ecc-b1d8-69e21df80275","type":"Rect"},"hover_glyph":null,"name":"block","nonselection_glyph":{"id":"36e19e3e-8666-4862-86af-fc84b915166c","type":"Rect"},"selection_glyph":null},"id":"574743ab-5cde-4a79-9d92-39aaae51d2c5","type":"GlyphRenderer"},{"attributes":{"args":{"reset_button":{"id":"fe891c25-f2d6-46ba-9373-80a5993c2699","type":"Button"},"source":{"id":"69deee5c-0cf8-4920-adfb-eb4ac356634c","type":"ColumnDataSource"},"start_button":{"id":"818f6229-4f1c-4332-b705-20381da1fe27","type":"Button"},"stop_button":{"id":"0fa4750b-92f3-4786-b89f-cc1571de30b5","type":"Button"}},"code":"\n    function disable_button(button) {\n        button_id = button.get('id');\n        button_element = document.querySelector('#modelid_' + button_id + '>button');\n        button_element.setAttribute('disabled');\n    }\n    function enable_button(button) {\n        button_id = button.get('id');\n        button_element = document.querySelector('#modelid_' + button_id + '>button');\n        button_element.removeAttribute('disabled');\n    }\n    var data = source.get('data');\n    interval_id = data['interval_id'];\n    clearInterval(interval_id[0]);\n    enable_button(start_button);\n    disable_button(stop_button);\n    enable_button(reset_button);\n"},"id":"f772f8f0-99fb-4100-bc25-277e69c5930c","type":"CustomJS"},{"attributes":{"text":{"field":"time_string"},"text_align":"center","text_alpha":{"value":0.1},"text_baseline":"middle","text_color":{"value":"black"},"text_font_size":{"value":"100pt"},"x":{"field":"x"},"y":{"field":"y"}},"id":"6175059e-eef6-4bf5-97b9-19a43a6a7807","type":"Text"},{"attributes":{"text":{"field":"time_string"},"text_align":"center","text_alpha":{"value":0.75},"text_baseline":"middle","text_color":{"field":"text_color"},"text_font_size":{"value":"100pt"},"x":{"field":"x"},"y":{"field":"y"}},"id":"9f520b1e-5cec-4b4a-a01c-8ee876e4c0a6","type":"Text"},{"attributes":{"children":[{"id":"28abf2aa-9e06-4cab-a480-54129711827a","type":"Slider"}]},"id":"adf9ecea-bd46-4ce7-bcca-21fe549f5ba3","type":"WidgetBox"},{"attributes":{"children":[{"id":"0fa4750b-92f3-4786-b89f-cc1571de30b5","type":"Button"}],"disabled":true},"id":"509e0259-35c5-4d20-b0c0-5d448aedf92d","type":"WidgetBox"},{"attributes":{"callback":{"id":"f772f8f0-99fb-4100-bc25-277e69c5930c","type":"CustomJS"},"disabled":true,"icon":null,"label":"Stop"},"id":"0fa4750b-92f3-4786-b89f-cc1571de30b5","type":"Button"},{"attributes":{"callback":null,"column_names":["time_remaining","text_color","start_secs","fill_color","start_mins","start_time","interval_id","time_string","y","x","y","x"],"data":{"fill_color":["78c400"],"interval_id":[0],"start_mins":[5],"start_secs":[0],"start_time":[300],"text_color":["#ffffff"],"time_remaining":[300],"time_string":["05:00"],"x":[0],"y":[0]}},"id":"69deee5c-0cf8-4920-adfb-eb4ac356634c","type":"ColumnDataSource"}],"root_ids":["f1c0c82a-9e0b-46f6-a194-5e86c4b4f9de"]},"title":"Bokeh Application","version":"0.12.0"}};
    var render_items = [{"docid":"686e6993-5830-42de-a9db-d55b28c73143","elementid":"91f26131-3ead-43ea-ba85-9b4e8525ff9f","modelid":"f1c0c82a-9e0b-46f6-a194-5e86c4b4f9de"}];
    
    Bokeh.embed.embed_items(docs_json, render_items);
});
</script>

<div class="bk-root">
    <div class="plotdiv" id="91f26131-3ead-43ea-ba85-9b4e8525ff9f"></div>
</div>


#### Requirements
- [bokeh](http://bokeh.pydata.org/en/latest/index.html) 0.12 or above

#### Acknowledgements
- Thanks to my colleagues Grischa Toedt & Holger Dinkel for advice on how to remove `global` statements and dependency on the `bokeh server`.

